<!DOCTYPE html>
<html dir="rtl" lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aviatrix Official</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
        body { margin: 0; background: #0f172a; color: white; font-family: sans-serif; text-align: center; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        .header { padding: 20px; background: #1e293b; display: flex; justify-content: space-between; border-bottom: 2px solid #e91e63; }
        .game-area { flex-grow: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        #multiplier { font-size: 80px; font-weight: bold; z-index: 10; transition: 0.1s; }
        #plane { position: absolute; bottom: 20%; left: 10%; width: 100px; filter: drop-shadow(0 0 10px #e91e63); }
        .controls { background: #1e293b; padding: 30px; border-top-left-radius: 25px; border-top-right-radius: 25px; }
        .btn { padding: 15px 60px; font-size: 22px; font-weight: bold; cursor: pointer; border-radius: 12px; border: none; }
        .btn-bet { background: #22c55e; color: white; }
        .btn-cashout { background: #e91e63; color: white; display: none; }
        input { padding: 12px; border-radius: 8px; border: none; text-align: center; font-size: 18px; margin-bottom: 15px; }
    </style>
</head>
<body>

    <div class="header">
        <div style="font-weight: bold; color: #e91e63;">AVIATRIX</div>
        <div id="balance-box">Ø¨Ø§ÚµØ§Ù†Ø³: <span id="balance">0</span> IQD</div>
    </div>

    <div class="game-area">
        <div id="multiplier">1.00x</div>
        <img id="plane" src="https://aviator-game.in/wp-content/uploads/2023/02/aviator-plane.png">
    </div>

    <div class="controls">
        <input type="number" id="bet-amount" value="1000"> <br>
        <button id="bet-btn" class="btn btn-bet" onclick="startGame()">Ú¯Ø±Û•ÙˆÚ©Ø±Ø¯Ù† (BET)</button>
        <button id="cashout-btn" class="btn btn-cashout" onclick="cashOut()">ÙˆÛ•Ø±Ú¯Ø±ØªÙ† (CASH OUT)</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDCwv_kg1O3kiV4qkQjZnZHEWCrOMCH6W4",
            authDomain: "kurdex-pro-fa38c.firebaseapp.com",
            projectId: "kurdex-pro-fa38c",
            storageBucket: "kurdex-pro-fa38c.firebasestorage.app",
            messagingSenderId: "900983839878",
            appId: "1:900983839878:web:b445bdf15aebb1a0d68507"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        let balance = 0;
        let currentX = 1.00;
        let gameActive = false;
        let gameInterval;

        auth.onAuthStateChanged(user => {
            if (user) {
                db.collection("wallets").doc(user.uid).onSnapshot(doc => {
                    if (doc.exists) {
                        balance = doc.data().balance;
                        document.getElementById('balance').innerText = balance;
                    }
                });
            }
        });

        function startGame() {
            let betValue = parseInt(document.getElementById('bet-amount').value);
            if (betValue > balance) { alert("Ø¨Ø§ÚµØ§Ù†Ø³Øª Ø¨Û•Ø´ Ù†Ø§Ú©Ø§Øª!"); return; }
            
            balance -= betValue;
            updateBalanceInDB();
            gameActive = true;
            currentX = 1.00;
            
            document.getElementById('bet-btn').style.display = 'none';
            document.getElementById('cashout-btn').style.display = 'block';
            
            let crashPoint = (Math.random() * 3.5 + 1.1).toFixed(2);
            
            gameInterval = setInterval(() => {
                currentX += 0.01;
                document.getElementById('multiplier').innerText = currentX.toFixed(2) + "x";
                
                let plane = document.getElementById('plane');
                plane.style.left = (currentX * 7) + 5 + "%";
                plane.style.bottom = (currentX * 5) + 15 + "%";

                if (currentX >= crashPoint) { crash(); }
            }, 100);
        }

        function cashOut() {
            if (!gameActive) return;
            let betValue = parseInt(document.getElementById('bet-amount').value);
            balance += Math.floor(betValue * currentX);
            updateBalanceInDB();
            stopGame();
            alert("Ù¾ÛŒØ±Û†Ø²Û•! Ù¾Ø§Ø±Û•Ú©Û•Øª ÙˆÛ•Ø±Ú¯Ø±ØªÛ•ÙˆÛ•.");
        }

        function crash() {
            stopGame();
            document.getElementById('multiplier').style.color = "red";
            alert("ØªÛ•Ù‚ÛŒÛŒÛ•ÙˆÛ•! ðŸ’¥");
        }

        function stopGame() {
            clearInterval(gameInterval);
            gameActive = false;
            document.getElementById('bet-btn').style.display = 'inline-block';
            document.getElementById('cashout-btn').style.display = 'none';
            document.getElementById('plane').style.left = "10%";
            document.getElementById('plane').style.bottom = "20%";
        }

        function updateBalanceInDB() {
            const user = auth.currentUser;
            if (user) { db.collection("wallets").doc(user.uid).update({ balance: balance }); }
        }
    </script>
</body>
</html>
